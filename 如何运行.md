# 🚀 新闻管理系统 - 运行指南

## 方式一：一键启动（推荐）

### 启动系统
```powershell
# 在项目根目录运行
.\start_system.ps1
```

**这个脚本会自动**:
1. ✅ 检查Docker状态
2. ✅ 启动MySQL和Redis容器
3. ✅ 在新窗口启动后端（Spring Boot）
4. ✅ 在新窗口启动前端（Vue 3）

### 停止系统
```powershell
# 在项目根目录运行
.\stop_system.ps1
```

---

## 方式二：手动启动

### 步骤1: 启动数据库
```bash
# 在项目根目录
docker-compose up -d
```

### 步骤2: 启动后端
```bash
# 打开新的PowerShell窗口
cd C:\Users\83932\Desktop\demo\News_website\backend
mvn spring-boot:run
```

### 步骤3: 启动前端
```bash
# 打开另一个新的PowerShell窗口
cd C:\Users\83932\Desktop\demo\News_website\frontend
npm run dev
```

---

## 📍 访问地址

启动成功后，访问：

| 服务 | 地址 | 说明 |
|------|------|------|
| **前端界面** | http://localhost:5173 | Vue 3用户界面 |
| **后端API** | http://localhost:8080/api | Spring Boot API |
| **API文档** | http://localhost:8080/api/actuator | 监控端点 |

---

## 🔑 登录信息

**管理员账号**:
- 用户名: `admin`
- 密码: `admin123`

---

## ✅ 启动确认

### 检查后端是否启动
访问: http://localhost:8080/api/actuator/health

应该看到:
```json
{"status":"UP"}
```

### 检查前端是否启动
访问: http://localhost:5173

应该看到新闻列表页面

---

## 🧪 测试功能

### 自动化测试（可选）
```powershell
# 测试新闻API
.\test_news_api.ps1

# 测试爬虫API
.\test_crawler_api.ps1

# 测试AI摘要API
.\test_summary_api.ps1
```

---

## 🔑 配置 ZhipuAI API Key（可选）

系统默认使用**模拟摘要**，无需配置即可使用。如需真实 AI 摘要：

### 快速配置
```batch
# 运行配置脚本
.\配置API密钥.bat
```

### 手动配置
```batch
# 设置环境变量
setx ZHIPUAI_API_KEY "你的API密钥"

# 重启后端服务
```

详细说明请查看：[ZhipuAI配置说明.md](./ZhipuAI配置说明.md)

---

## 🐛 常见问题

### Q: 后端启动失败，提示端口8080被占用
**A**: 运行 `.\stop_system.ps1` 停止所有服务，或手动查找占用进程：
```powershell
jps -l | Select-String "NewsManagement"
taskkill /F /PID {进程ID}
```

### Q: 看到 ZhipuAI API 401 错误
**A**: 这是正常的！系统会自动使用模拟摘要，不影响使用。如需真实 AI 摘要，请配置 API Key（参考上方"配置 ZhipuAI API Key"）。

### Q: 批量生成摘要后其他页面超时
**A**: 已修复！请重启后端应用新配置：
```batch
.\重启后端并测试.bat
```
修复内容：
- ✅ 添加了异步任务线程池限制
- ✅ 优化了批量处理逻辑
- ✅ 增加了前端超时时间

详细说明请查看：[批量生成摘要超时问题修复.md](./批量生成摘要超时问题修复.md)

### Q: 前端启动失败，提示端口5173被占用
**A**: 关闭其他Vite进程或修改端口：
```bash
# 在frontend/vite.config.ts中修改端口
server: { port: 5174 }
```

### Q: 数据库连接失败
**A**: 确保Docker容器正在运行：
```bash
docker ps
docker-compose up -d
```

---

## 📝 完整启动流程

1. **打开PowerShell** (以管理员身份)
2. **进入项目目录**:
   ```powershell
   cd C:\Users\83932\Desktop\demo\News_website
   ```
3. **运行启动脚本**:
   ```powershell
   .\start_system.ps1
   ```
4. **等待30秒** 让所有服务启动
5. **打开浏览器** 访问 http://localhost:5173
6. **开始使用** 浏览新闻或登录管理

---

## 🎯 使用建议

### 首次使用
1. 访问首页查看新闻列表
2. 点击新闻查看详情和AI摘要
3. 登录管理后台（/login）
4. 触发爬虫采集新闻
5. 管理新闻和分类

### 日常使用
1. 系统会每小时自动采集新闻
2. 新创建的新闻会自动生成AI摘要
3. 可通过管理后台管理所有内容

---

**准备好了吗？运行 `.\start_system.ps1` 开始体验！** 🚀

