# 新闻管理系统 - 后台访问指南

## 📋 访问步骤

### 1️⃣ 确保服务已启动

**检查所有服务是否运行：**
```powershell
# 使用检查脚本
.\check_status.ps1

# 或者使用启动脚本
.\start_system.bat
```

需要确保以下服务都在运行：
- ✅ MySQL (端口 3306)
- ✅ Redis (端口 6379)
- ✅ 后端服务 (端口 8080)
- ✅ 前端服务 (端口 5173)

### 2️⃣ 访问登录页面

**打开浏览器，访问：**
```
http://localhost:5173/login
```

### 3️⃣ 使用管理员账号登录

**默认管理员账号：**
```
用户名：admin
密码：admin123
```

⚠️ **注意**：首次登录后建议立即修改密码！

### 4️⃣ 进入管理后台

登录成功后，会自动跳转到管理后台：
```
http://localhost:5173/admin
```

---

## 🎯 后台功能模块

登录后可以访问以下功能：

### 📊 仪表盘（Dashboard）
- **URL**: http://localhost:5173/admin
- **功能**：查看系统概览、统计数据

### 📰 新闻管理
- **URL**: http://localhost:5173/admin/news
- **功能**：
  - 查看所有新闻
  - 创建新新闻
  - 编辑现有新闻
  - 删除新闻
  - 发布/下架新闻

### 📁 分类管理
- **URL**: http://localhost:5173/admin/categories
- **功能**：
  - 管理新闻分类
  - 添加/编辑/删除分类

### 🕷️ 采集管理（爬虫）
- **URL**: http://localhost:5173/admin/crawler
- **功能**：
  - 配置爬虫任务
  - 启动/停止采集
  - 查看采集记录

### 🏷️ 分类规则
- **URL**: http://localhost:5173/admin/rules
- **功能**：
  - 配置自动分类规则
  - 管理关键词匹配

### 📝 审计日志
- **URL**: http://localhost:5173/admin/audit-log
- **功能**：
  - 查看系统操作日志
  - 追踪用户行为

---

## 🌐 前台用户界面

普通用户访问（无需登录）：

### 🏠 首页
```
http://localhost:5173/
```
显示最新新闻列表

### 📖 新闻详情
```
http://localhost:5173/news/:id
```
例如：http://localhost:5173/news/1

### 🗂️ 分类新闻
```
http://localhost:5173/category/:id
```
例如：http://localhost:5173/category/1

---

## 🔧 API 接口地址

如果需要直接访问 API：

### 后端 API 根地址
```
http://localhost:8080/api
```

### 主要接口

**认证接口：**
- 登录：POST http://localhost:8080/api/auth/login
- 注册：POST http://localhost:8080/api/auth/register

**新闻接口：**
- 新闻列表：GET http://localhost:8080/api/news
- 新闻详情：GET http://localhost:8080/api/news/:id
- 创建新闻：POST http://localhost:8080/api/news （需要登录）
- 更新新闻：PUT http://localhost:8080/api/news/:id （需要登录）
- 删除新闻：DELETE http://localhost:8080/api/news/:id （需要登录）

**分类接口：**
- 分类列表：GET http://localhost:8080/api/categories
- 分类详情：GET http://localhost:8080/api/categories/:id
- 创建分类：POST http://localhost:8080/api/categories （需要管理员）

**爬虫接口：**
- 爬虫任务：GET http://localhost:8080/api/crawler/tasks （需要管理员）
- 启动爬虫：POST http://localhost:8080/api/crawler/start （需要管理员）

---

## 🔐 权限说明

### 公开访问（无需登录）
- ✅ 查看新闻列表
- ✅ 查看新闻详情
- ✅ 查看分类列表
- ✅ 按分类浏览新闻

### 需要登录
- 🔒 创建新闻
- 🔒 编辑自己的新闻
- 🔒 删除自己的新闻

### 需要管理员权限
- 🔐 访问管理后台
- 🔐 管理所有新闻
- 🔐 管理分类
- 🔐 管理爬虫任务
- 🔐 配置分类规则
- 🔐 查看审计日志

---

## 🚨 故障排除

### 无法访问登录页面
1. 检查前端服务是否运行：`http://localhost:5173`
2. 查看终端是否有错误信息
3. 尝试重启前端：
   ```bash
   cd frontend
   npm run dev
   ```

### 登录提示错误
1. **"网络错误"** - 检查后端服务是否运行
   ```bash
   netstat -ano | findstr :8080
   ```
2. **"用户名或密码错误"** - 确认使用正确的账号密码（admin/admin123）
3. **"403 Forbidden"** - 确保已重启后端服务以应用安全配置

### 登录成功但无法访问管理后台
1. 清除浏览器缓存和 Cookie
2. 检查浏览器控制台是否有错误（F12）
3. 确认 localStorage 中有 token：
   - 按 F12 打开开发者工具
   - 切换到 Application/Storage 标签
   - 查看 Local Storage
   - 应该能看到 `news_management_token`

### 后端返回 403 错误
1. 确认已应用最新的 SecurityConfig 配置
2. 重启后端服务
3. 检查后端日志：`backend/logs/news-management.log`

---

## 📞 快速访问链接

**前台（用户端）：**
- 🏠 首页：http://localhost:5173/

**后台（管理端）：**
- 🔑 登录：http://localhost:5173/login
- 📊 仪表盘：http://localhost:5173/admin
- 📰 新闻管理：http://localhost:5173/admin/news
- 📁 分类管理：http://localhost:5173/admin/categories
- 🕷️ 采集管理：http://localhost:5173/admin/crawler

**API 接口：**
- 🔌 API 根地址：http://localhost:8080/api
- 💓 健康检查：http://localhost:8080/api/health

---

## 📝 使用建议

1. **首次使用**：先访问前台查看新闻列表，熟悉界面
2. **管理新闻**：使用管理员账号登录后台，可以创建和管理新闻
3. **自动采集**：配置爬虫任务，实现新闻自动采集
4. **智能分类**：使用智谱AI自动生成摘要和分类
5. **安全建议**：生产环境部署后立即修改默认管理员密码

---

## 🎉 快速开始

**一键启动所有服务：**
```powershell
.\start_system.bat
```

**等待所有服务启动后（约30秒），访问：**
```
http://localhost:5173/login
```

**使用默认账号登录：**
```
用户名：admin
密码：admin123
```

就这么简单！🚀

